function playAudio(){audio.loop=!0,audio.play(),audio.volume=.1,playimg.style.display="none",pauseimg.style.display=""}function pauseAudio(){audio.pause(),playimg.style.display="",pauseimg.style.display="none"}function playWinNotif(){winNotif.loop=!1,winNotif.play(),winNotif.volume=1}$(function(){var e="",n=0,s=!1;$("#bouton-logout").hide();var o=io.connect();o.emit("new_client"),o.on("new_question",function(e){var n=e.question;s=!1,$("#question-text").text(n.question),$("#question-number").text("Question "+e.numero);for(var o=0;o<=n.reponses.length-1;o++)$("#reponse"+(o+1)+" .reponse").text(n.reponses[o]);$(".reponse").show(),$(".joueurs-dans-la-reponse").hide().html(""),$("#timer-plein").finish(),$("#timer-plein").animate({width:"0%"},200,"linear").animate({width:"100%"},e.temps-200,"linear")}),o.on("joueurs_par_reponses",function(e){joueurs=e,$(".joueurs-dans-la-reponse").html("");for(var n=joueurs.length-1;n>=0;n--)$("#joueurs-dans-la-reponse"+joueurs[n].id).append('<li><img class="photo-joueur" src="'+joueurs[n].photo+'"><span class="pseudo-joueur">'+joueurs[n].pseudo+"</span>")}),o.on("scores_partie",function(e){var s=e,o=-1;s.sort(function(e,n){return n.score-e.score});for(var t=0;t<s.length;t++)s[t].pseudoOutput=s[t].pseudo.length>12?s[t].pseudo.substring(0,9)+"...":s[t].pseudo,s[t].idJoueur===n&&(o=t,s[t].pseudoOutput="Vous");var a="joueur";s.length>1&&(a="joueurs"),$("#classement-partie ul").html('<li style="text-align: center; font-size: 13px; font-style: italic; margin: 0 0 10px 0">'+s.length+" "+a+"</li>");for(var t=0;3>t;t++)void 0!==s[t]&&$("#classement-partie ul").append('\n					<li>\n						<div class="joueur-classement">\n							<span class="position-classement">'+(t+1)+'.</span>\n							<img class="photo-joueur-classement" src="'+s[t].photo+'">\n							<span class="pseudo-classement" title="'+s[t].pseudo+'">'+s[t].pseudoOutput+'</span>\n						</div>\n						<span class="score-classement">'+s[t].score+" pts</span>\n					</li>");o>=3&&-1!==o&&(console.log(o),$("#classement-partie ul").append('\n				<li>...</li>\n				<li>\n					<div class="joueur-classement">\n						<span class="position-classement">'+(o+1)+'.</span>\n						<img class="photo-joueur-classement" src="'+s[o].photo+'">\n						<span class="pseudo-classement" title="'+s[o].pseudo+'">'+s[o].pseudoOutput+'</span>\n					</div>\n					<span class="score-classement">'+s[o].score+" pts</span>\n				</li>"))}),o.on("scores_semaine",function(n){var s=n,o=-1;s.sort(function(e,n){return n.score-e.score});for(var t=0;t<s.length;t++)s[t].pseudoOutput=s[t].pseudo.length>12?s[t].pseudo.substring(0,9)+"...":s[t].pseudo,s[t].pseudo===e&&(o=t,/Anonyme [\d]+/g.test(s[t].pseudo)&&(s[t].pseudoOutput="Vous"));var a="joueur";s.length>1&&(a="joueurs"),$("#classement-semaine ul").html('<li style="text-align: center; font-size: 13px; font-style: italic; margin: 0 0 10px 0">'+s.length+" "+a+"</li>");for(var t=0;3>t;t++)void 0!==s[t]&&$("#classement-semaine ul").append('\n					<li>\n						<div class="joueur-classement">\n							<span class="position-classement">'+(t+1)+'.</span>\n							<img class="photo-joueur-classement" src="'+s[t].photo+'">\n							<span class="pseudo-classement" title="'+s[t].pseudo+'">'+s[t].pseudoOutput+'</span>\n						</div>\n						<span class="score-classement">'+s[t].score+" pts</span>\n					</li>");o>=3&&-1!==o&&$("#classement-semaine ul").append('\n				<li>...</li>\n				<li>\n					<div class="joueur-classement">\n						<span class="position-classement">'+(o+1)+'.</span>\n						<img class="photo-joueur-classement" src="'+s[o].photo+'">\n						<span class="pseudo-classement" title="'+s[o].pseudo+'">'+s[o].pseudoOutput+'</span>\n					</div>\n					<span class="score-classement">'+s[o].score+" pts</span>\n				</li>")}),o.on("ids_gagnants",function(e){gagnants=e;for(var s=0;s<gagnants.length;s++)gagnants[s].id===n&&($(".win").html("+"+(gagnants[s].score_ajout+gagnants[s].combo_ajout)),$(".win").attr("style",""),$(".win").animate({opacity:"0"},1500),playWinNotif())}),o.on("pseudo_joueur",function(n){e=n,$("#pseudo-utilisateur").html(e),/Anonyme [\d]+/g.test(e)||($("#bouton-logout").toggle(),$(".bouton-connexion").toggle())}),o.on("id_joueur",function(e){n=e}),$("#reponse1").click(function(){s||(o.emit("answer",1),s=!0)}),$("#reponse2").click(function(){s||(o.emit("answer",2),s=!0)}),$("#reponse3").click(function(){s||(o.emit("answer",3),s=!0)}),$("#reponse4").click(function(){s||(o.emit("answer",4),s=!0)}),$(".button-reponse").click(function(){$(".reponse").hide(),$(".joueurs-dans-la-reponse").show()}),$(document).ready(function(){$(".cookie-message").cookieBar(".my-boutton"),$(".fancybox").fancybox(),$(".my-boutton").click(function(){}),$(".fancybox").fancybox({padding:5,openEffect:"elastic",openSpeed:150,closeEffect:"elastic",closeSpeed:150,helpers:{overlay:{css:{background:"rgba(0,0,0,0.85)"}}}})});var t=0;$("#button-chat").click(function(){8>t?(t++,o.emit("message_chat",$("#fond-chat_bas").val()),$("#fond-chat_bas").val("")):($("#fond-chat_haut").append('<p style="text-align: left; color: #ee0000; font-size: 14px; margin: 5px 0;">Veuillez patientez, vous floodez.</p>'),$("#fond-chat_haut").scrollTop($("#fond-chat_haut").outerHeight()))}),clearCompteur=setInterval(function(){t>0&&t--},4e3),o.on("new_message_chat",function(e){$("#fond-chat_haut").append('<p style="text-align: left; color: #000000; font-size: 14px; margin: 5px;"><img class="photo-joueur-classement" src="'+e.photo+'"><strong>'+e.pseudo+" :</strong> "+e.message+"</p>"),$("#fond-chat_haut").scrollTop($("#fond-chat_haut").outerHeight())})}),window.location.hash&&"#_=_"===window.location.hash&&(window.location.hash="");var audio=document.getElementById("audio"),playimg=document.getElementById("playimg"),pauseimg=document.getElementById("pauseimg"),winNotif=document.getElementById("winNotif");